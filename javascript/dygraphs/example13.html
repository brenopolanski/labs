<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">

  <title>Example 10</title>

  <link rel="stylesheet" src="https://cdnjs.cloudflare.com/ajax/libs/dygraph/2.0.0/dygraph.min.css">
  <style>
    #darkbg .dygraph-axis-label { color: white; }
    .dygraph-legend { text-align: right; }
    #darkbg .dygraph-legend { background-color: #101015; }
  </style>
</head>
<body>
  <div style="background-color: #101015; color: white">
    <p>Dark background, custom range selector gradient color.</p>
    <div id="darkbg" style="width:600px; height:30px;"></div>
    <br>
    <button type="button" id="btn">Set data</button>
  </div>

  <script src="https://code.jquery.com/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/dygraph/2.0.0/dygraph.min.js"></script>
  <script src="data.js"></script>
  <script>
    var g = new Dygraph(
        document.getElementById('darkbg'),
        data_temp,
        {
            xAxisHeight: 30,
            axes : {
              x : {
                drawAxis : false
              }
            },

            // rollPeriod: 14,
            // showRoller: true,
            // customBars: true,
            // title: 'Nightly Temperatures in New York vs. San Francisco',
            // ylabel: 'Temperature (F)',
            // legend: 'always',
            showRangeSelector: true,
            rangeSelectorPlotFillColor: 'MediumSlateBlue',
            rangeSelectorPlotFillGradientColor: 'rgba(123, 104, 238, 0)',
            colorValue: 0.9,
            fillAlpha: 0.4,

            showLabelsOnHighlight: false,

            // http://dygraphs.com/options.html#Callbacks

            // underlayCallback: function(e) {
            //   console.log(e);
            // },

            drawCallback: function(dygraph, is_initial) {
              console.log(dygraph);
              // console.log(is_initial);
            },

            zoomCallback: function(minDate, maxDate, yRanges) {
              console.log('minDate ---> ' + minDate);
              console.log('maxDate ---> ' + maxDate);
              console.log('====================================');
              // console.log(yRanges);
            },

            // interactionModel: {
            //   'mousedown': function(e) {
            //     console.log(e);
            //   },
            //   'mouseup': function(e) {
            //     console.log(e);
            //   }
            // }
        }
    );

    // minDate ---> 1198807433766.234
    // maxDate ---> 1214400950649.3506

    $(function() {
      $('.dygraph-rangesel-zoomhandle').on('mouseup', function(e) {
        console.log(e);
      });

      $('.dygraph-rangesel-fgcanvas').on('mouseup', function(e) {
        console.log(e);
      });

      $('#btn').click(function() {
        var data = [ new Date(1202577294990.7236), new Date(1216799953246.7532)];

        g.updateOptions({
          dateWindow: data
        });
      });
    });
  </script>
</body>
</html>
